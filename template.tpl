___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "URL to Cookie or Local Storage",
  "categories": ["ADVERTISING","CONVERSIONS","ATTRIBUTION"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATkAAAE5CAYAAADr4VfxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEW2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI0LTEwLTI1PC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPjE8L0F0dHJpYjpFeHRJZD4KICAgICA8QXR0cmliOkZiSWQ+NTI1MjY1OTE0MTc5NTgwPC9BdHRyaWI6RmJJZD4KICAgICA8QXR0cmliOlRvdWNoVHlwZT4yPC9BdHRyaWI6VG91Y2hUeXBlPgogICAgPC9yZGY6bGk+CiAgIDwvcmRmOlNlcT4KICA8L0F0dHJpYjpBZHM+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOmRjPSdodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyc+CiAgPGRjOnRpdGxlPgogICA8cmRmOkFsdD4KICAgIDxyZGY6bGkgeG1sOmxhbmc9J3gtZGVmYXVsdCc+YW5hbHl0aWNzX2VuZ2luZSAtIDE8L3JkZjpsaT4KICAgPC9yZGY6QWx0PgogIDwvZGM6dGl0bGU+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDov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\u003d"
  },
  "description": "Store query parameters like UTMs in First-Party Cookies or Local Storage.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "utm",
    "displayName": "Query parameters to store",
    "simpleValueType": true,
    "defaultValue": "utm_source,utm_medium,utm_campaign,utm_term",
    "help": "Add query parameters separated by commas",
    "alwaysInSummary": false
  },
  {
    "type": "SELECT",
    "name": "cookie_duration_tag",
    "displayName": "Cookie Duration",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "session",
        "displayValue": "Session"
      },
      {
        "value": "7 days",
        "displayValue": "7 days"
      },
      {
        "value": "30 days",
        "displayValue": "30 days"
      },
      {
        "value": "60 days",
        "displayValue": "60 days"
      },
      {
        "value": "90 days",
        "displayValue": "90 days"
      }
    ],
    "simpleValueType": true,
    "alwaysInSummary": false
  },
  {
    "type": "CHECKBOX",
    "name": "local_storage",
    "checkboxText": "Store in Local Storage",
    "simpleValueType": true,
    "help": "Just allowed for these query parameters gclid, utm_source, utm_medium, utm_campaign, utm_content, li_fat_id, fbclid, fbp, msclkid, dclid, email, phone, last_name, first_name, em, ph, fn, ln, name",
    "alwaysInSummary": false
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const getUrl = require('getUrl');
const queue = require('createQueue');
const cookie = require('setCookie');
const query = require('queryPermission');
const log = require('logToConsole');
const localStorage = require('localStorage');

// Function to get cookie duration in seconds based on the setting
const getCookieDuration = (durationSetting) => {
    const SECONDS_PER_DAY = 86400;
    
    // If duration setting is undefined or null, return default
    if (!durationSetting) {
        return 30 * SECONDS_PER_DAY; // Default to 30 days
    }
    
    switch(durationSetting.toLowerCase()) {
        case 'session':
            return 'session'; // Special case for session cookies
        case '7 days':
            return 7 * SECONDS_PER_DAY;
        case '30 days':
            return 30 * SECONDS_PER_DAY;
        case '60 days':
            return 60 * SECONDS_PER_DAY;
        case '90 days':
            return 90 * SECONDS_PER_DAY;
        default:
            return 30 * SECONDS_PER_DAY; // Default to 30 days if invalid value
    }
};

// Get localStorage preference from template field
const useLocalStorage = data.local_storage || false;
log('LocalStorage enabled:', useLocalStorage);

// Get cookie duration from template field and log any issues
log('Raw cookie duration setting:', data.cookie_duration_tag);
const cookieDuration = getCookieDuration(data.cookie_duration_tag);
log('Processed cookie duration:', cookieDuration);

// Get query string from URL
const querystring = getUrl('query');
log('Full Query String:', querystring);

// Check if UTM parameters are configured
if (!data.utm) {
    log('Error: No UTM parameters configured');
    data.gtmOnFailure();
    return;
}

// Get parameters to track from template field
const paramsToTrack = data.utm.split(',');
log('Parameters to Track:', paramsToTrack);

// Loop through each parameter we want to track
for(var index = 0; index < paramsToTrack.length; index++) {
    // Get the parameter name and trim any whitespace
    const paramName = paramsToTrack[index].trim();
    log('Checking parameter:', paramName);
    
    // Check if parameter exists in querystring
    const paramExists = querystring.indexOf(paramName + '=');
    log('Parameter position in query:', paramExists);
    
    if(paramExists !== -1) {
        // Get the starting position of the value
        const startPos = paramExists + paramName.length + 1;
        log('Value starts at position:', startPos);
        
        // Find the end position (either & or end of string)
        const endPos = querystring.indexOf('&', startPos);
        log('Value ends at position:', endPos);
        
        // Extract the value
        const paramValue = endPos === -1 ? 
            querystring.substring(startPos) : 
            querystring.substring(startPos, endPos);
        
        log('Extracted value:', paramValue);
        
        // Store in cookie
        const cookieOptions = {
            domain: 'auto',
            path: '/'
        };

        // Only add max-age if it's not a session cookie
        if (cookieDuration !== 'session' && cookieDuration !== undefined) {
            cookieOptions['max-age'] = cookieDuration.toString();
        }
        
        cookie(paramName, paramValue, cookieOptions);
        log('Cookie set attempted for:', paramName, 'with value:', paramValue, 'and duration:', cookieDuration);

        // Store in localStorage if enabled
        if (useLocalStorage) {
            localStorage.setItem(paramName, paramValue);
            log('LocalStorage set attempted for:', paramName, 'with value:', paramValue);
        }
    } else {
        log('Parameter not found in query string:', paramName);
    }
}

// If we get here, everything worked
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gclid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "utm_source"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "utm_medium"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "utm_campaign"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "utm_term"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "li_fat_id"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbclid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fbp"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "msclkid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dclid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "email"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "phone"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "last_name"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "first_name"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "em"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ph"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "fn"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ln"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "utm_content"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 10/26/2024, 3:50:30 PM


